{"version":3,"file":"fxd-select.auto.esm.min.js","sources":["../src/core/model.js","../src/core/utils.js","../src/core/render.js","../src/core/filter.js","../src/core/events.js","../src/core/FxdSelect.js","../src/auto.js"],"sourcesContent":["export function parseSelect(selectEl) {\n  const options = [];\n\n  selectEl.querySelectorAll('option').forEach((opt) => {\n    options.push({\n      value: opt.value,\n      label: opt.textContent,\n      selected: opt.selected,\n      disabled: opt.disabled,\n      group: opt.parentElement?.tagName === 'OPTGROUP' ? opt.parentElement.label : null,\n      element: opt,\n    });\n  });\n\n  return options;\n}\n\nexport function normalizeOptions(data, selectEl) {\n  if (!Array.isArray(data)) return [];\n\n  const selectedValues = selectEl?.multiple\n    ? new Set(Array.from(selectEl.selectedOptions).map((opt) => opt.value))\n    : new Set([selectEl?.value]);\n\n  return data.map((item) => {\n    const value = item.value ?? '';\n    const label = item.label ?? String(value);\n    const selected = typeof item.selected === 'boolean'\n      ? item.selected\n      : selectedValues.has(value);\n\n    return {\n      value,\n      label,\n      selected,\n      disabled: Boolean(item.disabled),\n      group: item.group ?? null,\n      element: null,\n    };\n  });\n}\n\nexport function buildModel(selectEl, options = {}) {\n  if (Array.isArray(options.data)) {\n    return normalizeOptions(options.data, selectEl);\n  }\n  return parseSelect(selectEl);\n}\n\nexport function syncSelectWithModel(selectEl, model) {\n  const currentGroups = new Map();\n  selectEl.innerHTML = '';\n\n  model.forEach((opt) => {\n    let parent = selectEl;\n    if (opt.group) {\n      if (!currentGroups.has(opt.group)) {\n        const groupEl = document.createElement('optgroup');\n        groupEl.label = opt.group;\n        currentGroups.set(opt.group, groupEl);\n        selectEl.appendChild(groupEl);\n      }\n      parent = currentGroups.get(opt.group);\n    }\n\n    const optionEl = document.createElement('option');\n    optionEl.value = opt.value;\n    optionEl.textContent = opt.label;\n    optionEl.disabled = Boolean(opt.disabled);\n    optionEl.selected = Boolean(opt.selected);\n    parent.appendChild(optionEl);\n  });\n}\n","let idCounter = 0;\n\nexport function createId(prefix) {\n  idCounter += 1;\n  return `${prefix}-${idCounter}`;\n}\n\nexport function addClasses(el, classString) {\n  if (!classString) return;\n  classString.split(' ').forEach((c) => {\n    if (c) el.classList.add(c);\n  });\n}\n\nexport function dispatchEvent(el, name, detail = {}) {\n  el.dispatchEvent(new CustomEvent(name, { detail, bubbles: true }));\n}\n\nexport function warnIfMissingBootstrap(major = 5) {\n  if (typeof window === 'undefined' || typeof document === 'undefined') return;\n\n  const rootStyles = getComputedStyle(document.documentElement);\n  const bsBodyColor = rootStyles.getPropertyValue('--bs-body-color').trim();\n\n  const probeMenu = document.createElement('div');\n  probeMenu.className = 'dropdown-menu';\n  probeMenu.style.position = 'absolute';\n  probeMenu.style.visibility = 'hidden';\n  document.body.appendChild(probeMenu);\n  const menuStyles = getComputedStyle(probeMenu);\n  document.body.removeChild(probeMenu);\n\n  const hasBootstrap = bsBodyColor.length > 0 && menuStyles.position === 'absolute';\n  if (!hasBootstrap) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `fxd-select: Bootstrap ${major}.x styles not detected. ` +\n      'The component will still work, but you should provide your own styles.'\n    );\n  }\n}\n","import { addClasses, createId } from './utils.js';\n\nfunction updateButtonLabel(ui, model, options, selectEl) {\n  if (typeof options.renderValue === 'function') {\n    const rendered = options.renderValue(model, selectEl);\n    if (rendered instanceof HTMLElement) {\n      ui.button.innerHTML = '';\n      ui.button.appendChild(rendered);\n      return;\n    }\n    ui.button.innerHTML = rendered ?? '';\n    return;\n  }\n\n  const selected = model.filter((opt) => opt.selected);\n  if (selected.length === 0) {\n    ui.button.textContent = options.placeholder;\n    return;\n  }\n\n  if (selectEl.multiple) {\n    if (options.multiValueStyle === 'pills') {\n      const container = document.createElement('span');\n      container.className = options.pillContainerClass;\n\n      const max = Math.max(0, options.maxDisplayItems);\n      const visibleLimit = max + 1;\n      const visibleLabels = selected.slice(0, Math.min(selected.length, visibleLimit));\n      visibleLabels.forEach((opt) => {\n        const pill = document.createElement('span');\n        pill.className = options.pillClass;\n        pill.textContent = opt.label;\n        container.appendChild(pill);\n      });\n\n      const remaining = selected.length - visibleLabels.length;\n      if (remaining > 0) {\n        const count = document.createElement('span');\n        count.className = options.selectionCountClass;\n        const tpl = options.selectionCountTemplate;\n        count.textContent = typeof tpl === 'function' ? tpl(remaining) : `${remaining} selected`;\n        container.appendChild(count);\n      }\n\n      ui.button.innerHTML = '';\n      ui.button.appendChild(container);\n      return;\n    }\n\n    if (options.multiValueStyle === 'count') {\n      const tpl = options.selectionCountTemplate;\n      const text = typeof tpl === 'function' ? tpl(selected.length) : `${selected.length} selected`;\n      ui.button.innerHTML = `<span class=\"${options.selectionCountClass}\">${text}</span>`;\n      return;\n    }\n\n    const max = Math.max(0, options.maxDisplayItems);\n    const visibleLimit = max + 1;\n    if (selected.length > visibleLimit) {\n      const remaining = selected.length - visibleLimit;\n      const tpl = options.selectionCountTemplate;\n      ui.button.textContent = typeof tpl === 'function' ? tpl(remaining) : `${remaining} selected`;\n      return;\n    }\n    ui.button.textContent = selected.map((opt) => opt.label).join(', ');\n    return;\n  }\n\n  ui.button.textContent = selected[0].label;\n}\n\nexport function render(selectEl, model, options, existingUi = null) {\n  const ui = existingUi || {};\n\n  if (!existingUi) {\n    ui.wrapper = document.createElement('div');\n    ui.wrapper.className = 'dropdown fxd-select';\n    addClasses(ui.wrapper, options.wrapperClass);\n\n    ui.control = document.createElement('div');\n    ui.control.className = 'd-flex align-items-center gap-1';\n\n    ui.button = document.createElement('button');\n    ui.button.type = 'button';\n    ui.button.className = options.buttonClass;\n    ui.button.setAttribute('role', 'combobox');\n    ui.button.setAttribute('aria-haspopup', 'listbox');\n    ui.button.setAttribute('aria-expanded', 'false');\n\n    ui.control.appendChild(ui.button);\n\n    if (options.clearable) {\n      ui.clearButton = document.createElement('button');\n      ui.clearButton.type = 'button';\n      ui.clearButton.className = options.clearButtonClass;\n      ui.clearButton.setAttribute('aria-label', options.clearButtonLabel);\n      ui.clearButton.textContent = options.clearButtonText;\n      ui.control.appendChild(ui.clearButton);\n    }\n\n    ui.menu = document.createElement('div');\n    ui.menu.className = options.menuClass;\n\n    ui.wrapper.appendChild(ui.control);\n    ui.wrapper.appendChild(ui.menu);\n\n    selectEl.parentNode.insertBefore(ui.wrapper, selectEl.nextSibling);\n  } else {\n    ui.menu.innerHTML = '';\n  }\n\n  ui.list = document.createElement('div');\n  ui.list.id = ui.list.id || createId('fxd-list');\n  ui.list.setAttribute('role', 'listbox');\n\n  ui.button.setAttribute('aria-controls', ui.list.id);\n\n  if (options.searchable) {\n    const searchWrapper = document.createElement('div');\n    const searchContainer = document.createElement('div');\n    const searchInput = document.createElement('input');\n\n    searchContainer.className = 'form-control form-control-sm w-auto d-flex flex-fill align-items-center p-1 m-1';\n    searchInput.className = 'form-control p-0 border-0 rounded-0 shadow-none';\n    searchInput.placeholder = options.filterPlaceholder;\n    searchInput.setAttribute('aria-label', options.filterPlaceholder);\n\n    searchContainer.appendChild(searchInput);\n\n    if (options.searchClearable) {\n      const searchClear = document.createElement('button');\n      searchClear.type = 'button';\n      searchClear.className = `fxd-search-clear ${options.searchClearButtonClass}`;\n      searchClear.setAttribute('aria-label', options.searchClearAriaLabel);\n      searchClear.textContent = options.searchClearIcon;\n      searchContainer.appendChild(searchClear);\n      ui.searchClearButton = searchClear;\n    }\n\n    if (ui.clearButton && selectEl.multiple) {\n      ui.control.removeChild(ui.clearButton);\n      searchContainer.appendChild(ui.clearButton);\n    }\n\n    searchWrapper.appendChild(searchContainer);\n    ui.menu.appendChild(searchWrapper);\n\n    ui.searchInput = searchInput;\n\n    if (options.showDivider) {\n      const divider = document.createElement('hr');\n      divider.className = 'm-0';\n      ui.menu.appendChild(divider);\n    }\n\n    ui.noResults = document.createElement('div');\n    ui.noResults.className = 'no-result text-muted px-2 small d-none';\n    ui.noResults.textContent = options.noResultsText;\n    ui.menu.appendChild(ui.noResults);\n  }\n\n  if (options.maxHeight && options.maxHeight !== 'auto') {\n    ui.list.style.overflowY = 'auto';\n    ui.list.style.maxHeight = options.maxHeight;\n  }\n\n  ui.menu.appendChild(ui.list);\n\n  ui.optionButtons = [];\n\n  let currentGroup = null;\n  model.forEach((opt) => {\n    if (opt.group && opt.group !== currentGroup) {\n      const header = document.createElement('div');\n      header.className = 'dropdown-header';\n      header.textContent = opt.group;\n      header.dataset.group = opt.group;\n      ui.list.appendChild(header);\n      currentGroup = opt.group;\n    }\n\n    if (!opt.group) {\n      currentGroup = null;\n    }\n\n    const item = document.createElement('button');\n    item.type = 'button';\n    item.className = 'dropdown-item fxd-item';\n    item.textContent = opt.label;\n    item.dataset.value = opt.value;\n    item.dataset.group = opt.group || '';\n    item.disabled = opt.disabled;\n    item.setAttribute('role', 'option');\n    item.setAttribute('aria-selected', opt.selected ? 'true' : 'false');\n    item.id = createId('fxd-opt');\n\n    if (options.renderOption) {\n      const rendered = options.renderOption(opt, { selected: opt.selected, disabled: opt.disabled });\n      if (rendered instanceof HTMLElement) {\n        item.innerHTML = '';\n        item.appendChild(rendered);\n      } else if (typeof rendered === 'string') {\n        item.innerHTML = rendered;\n      }\n    }\n\n    if (opt.selected) {\n      item.classList.add('is-selected');\n    }\n\n    if (options.showCheckmark) {\n      const check = document.createElement('span');\n      check.className = options.checkmarkClass;\n      check.setAttribute('aria-hidden', 'true');\n      check.textContent = options.checkmarkText;\n      item.appendChild(check);\n    }\n\n    ui.optionButtons.push(item);\n    ui.list.appendChild(item);\n  });\n\n  updateButtonLabel(ui, model, options, selectEl);\n\n  const isDisabled = selectEl.disabled;\n  ui.button.disabled = isDisabled;\n  if (ui.clearButton) ui.clearButton.disabled = isDisabled;\n  if (ui.searchInput) ui.searchInput.disabled = isDisabled;\n  if (ui.searchClearButton) ui.searchClearButton.disabled = isDisabled;\n\n  return ui;\n}\n","export function defaultFilter(query, option) {\n  if (!query) return true;\n  return option.label.toLowerCase().includes(query.toLowerCase());\n}\n\nexport function applyFilter(listEl, query, filterFn) {\n  const groupState = new Map();\n  let hidden = 0;\n  let visible = 0;\n\n  Array.from(listEl.children).forEach((item) => {\n    if (item.classList.contains('dropdown-header')) {\n      groupState.set(item.dataset.group || '', { header: item, visible: 0 });\n      return;\n    }\n\n    if (!item.matches('button.dropdown-item')) return;\n\n    const option = { label: item.textContent };\n    const show = filterFn(query, option);\n    item.classList.toggle('d-none', !show);\n    if (!show) hidden += 1;\n    if (show) visible += 1;\n\n    const groupKey = item.dataset.group || '';\n    if (groupState.has(groupKey) && show) {\n      groupState.get(groupKey).visible += 1;\n    }\n  });\n\n  groupState.forEach(({ header, visible }) => {\n    header.classList.toggle('d-none', visible === 0);\n  });\n\n  return { hidden, visible };\n}\n","import { defaultFilter, applyFilter } from './filter.js';\nimport { normalizeOptions, syncSelectWithModel } from './model.js';\nimport { dispatchEvent } from './utils.js';\n\nexport function bindEvents(fxd) {\n  const { selectEl, ui, options, state } = fxd;\n\n  const getVisibleOptions = () => (\n    Array.from(ui.list.querySelectorAll('button.dropdown-item')).filter(\n      (item) => !item.classList.contains('d-none') && !item.disabled\n    )\n  );\n\n  const setFocusedIndex = (index) => {\n    const optionsList = getVisibleOptions();\n    if (optionsList.length === 0) {\n      state.focusedIndex = -1;\n      ui.button.removeAttribute('aria-activedescendant');\n      return;\n    }\n\n    const clamped = Math.max(0, Math.min(index, optionsList.length - 1));\n    optionsList.forEach((item) => item.classList.remove('active'));\n\n    const focused = optionsList[clamped];\n    focused.classList.add('active');\n    focused.scrollIntoView({ block: 'nearest' });\n\n    state.focusedIndex = clamped;\n    ui.button.setAttribute('aria-activedescendant', focused.id);\n  };\n\n  const focusSelectedOrFirst = () => {\n    const optionsList = getVisibleOptions();\n    if (optionsList.length === 0) return;\n\n    const selectedIndex = optionsList.findIndex(\n      (item) => item.getAttribute('aria-selected') === 'true'\n    );\n\n    setFocusedIndex(selectedIndex >= 0 ? selectedIndex : 0);\n  };\n\n  const onButtonClick = (e) => {\n    if (selectEl.disabled) return;\n    e.preventDefault();\n    fxd.toggle();\n    if (fxd.state.open) {\n      focusSelectedOrFirst();\n      ui.searchInput?.select();\n    }\n  };\n\n  const onDocumentClick = (e) => {\n    if (!ui.wrapper.contains(e.target)) {\n      fxd.close();\n    }\n  };\n\n  const onItemClick = (e) => {\n    const item = e.target.closest('button.dropdown-item');\n    if (!item) return;\n    if (selectEl.disabled || item.disabled) return;\n    if (selectEl.multiple) {\n      const option = Array.from(selectEl.options).find((opt) => opt.value === item.dataset.value);\n      if (option) {\n        option.selected = !option.selected;\n      }\n      selectEl.dispatchEvent(new Event('change', { bubbles: true }));\n    } else {\n      selectEl.value = item.dataset.value;\n      selectEl.dispatchEvent(new Event('change', { bubbles: true }));\n      fxd.close();\n      ui.button.focus();\n    }\n  };\n\n  const onItemHover = (e) => {\n    const item = e.target.closest('button.dropdown-item');\n    if (!item) return;\n\n    const optionsList = getVisibleOptions();\n    const idx = optionsList.indexOf(item);\n    if (idx >= 0) setFocusedIndex(idx);\n  };\n\n  const onSelectChange = () => {\n    fxd.refresh();\n    dispatchEvent(selectEl, 'fxd:change');\n  };\n\n  let loadTimer = null;\n  const runLoad = async (query) => {\n    const data = await options.load?.(query);\n    if (!Array.isArray(data)) return;\n    const model = normalizeOptions(data, selectEl);\n    syncSelectWithModel(selectEl, model);\n    fxd.model = model;\n    fxd.refresh();\n    if (fxd.ui.searchInput) {\n      fxd.ui.searchInput.value = query;\n    }\n  };\n\n  const onFilterInput = (e) => {\n    const query = e.target.value;\n    fxd.state.query = query;\n\n    if (options.load) {\n      if (loadTimer) clearTimeout(loadTimer);\n      loadTimer = setTimeout(() => runLoad(query), options.loadDebounce);\n      return;\n    }\n\n    const filterFn = options.filter || defaultFilter;\n    const result = applyFilter(ui.list, query, filterFn);\n\n    if (ui.noResults) {\n      ui.noResults.classList.toggle('d-none', result.visible > 0);\n    }\n\n    focusSelectedOrFirst();\n  };\n\n  const onKeyDown = (e) => {\n    if (selectEl.disabled) return;\n    const key = e.key;\n    const openKeys = ['ArrowDown', 'ArrowUp', 'Enter', ' '];\n    const navKeys = ['ArrowDown', 'ArrowUp', 'Home', 'End'];\n\n    if (!fxd.state.open && openKeys.includes(key)) {\n      e.preventDefault();\n      fxd.open();\n      focusSelectedOrFirst();\n      ui.searchInput?.select();\n      return;\n    }\n\n    if (!fxd.state.open) return;\n\n    if (key === 'Escape') {\n      e.preventDefault();\n      fxd.close();\n      ui.button.focus();\n      return;\n    }\n\n    if (key === 'Enter') {\n      e.preventDefault();\n      const optionsList = getVisibleOptions();\n      const focused = optionsList[state.focusedIndex];\n      if (focused) {\n        focused.click();\n      }\n      return;\n    }\n\n    if (key === ' ') {\n      e.preventDefault();\n      const optionsList = getVisibleOptions();\n      const focused = optionsList[state.focusedIndex];\n      if (focused) {\n        focused.click();\n      }\n      return;\n    }\n\n    if (navKeys.includes(key)) {\n      e.preventDefault();\n      const optionsList = getVisibleOptions();\n      if (optionsList.length === 0) return;\n\n      if (key === 'Home') {\n        setFocusedIndex(0);\n        return;\n      }\n\n      if (key === 'End') {\n        setFocusedIndex(optionsList.length - 1);\n        return;\n      }\n\n      const delta = key === 'ArrowDown' ? 1 : -1;\n      setFocusedIndex(state.focusedIndex + delta);\n    }\n  };\n\n  const onClearClick = (e) => {\n    e.preventDefault();\n    fxd.clear();\n  };\n\n  const onSearchClearClick = () => {\n    if (!ui.searchInput) return;\n    ui.searchInput.value = '';\n    ui.searchInput.dispatchEvent(new Event('input'));\n    ui.searchInput.select();\n  };\n\n  ui.button.addEventListener('click', onButtonClick);\n  ui.list.addEventListener('click', onItemClick);\n  ui.list.addEventListener('mousemove', onItemHover);\n  document.addEventListener('click', onDocumentClick);\n  selectEl.addEventListener('change', onSelectChange);\n  ui.searchInput?.addEventListener('input', onFilterInput);\n  ui.searchClearButton?.addEventListener('click', onSearchClearClick);\n  ui.wrapper.addEventListener('keydown', onKeyDown);\n  ui.clearButton?.addEventListener('click', onClearClick);\n\n  return () => {\n    ui.button.removeEventListener('click', onButtonClick);\n    ui.list.removeEventListener('click', onItemClick);\n    ui.list.removeEventListener('mousemove', onItemHover);\n    document.removeEventListener('click', onDocumentClick);\n    selectEl.removeEventListener('change', onSelectChange);\n    ui.searchInput?.removeEventListener('input', onFilterInput);\n    ui.searchClearButton?.removeEventListener('click', onSearchClearClick);\n    ui.wrapper.removeEventListener('keydown', onKeyDown);\n    ui.clearButton?.removeEventListener('click', onClearClick);\n  };\n}\n","import { buildModel } from './model.js';\nimport { render } from './render.js';\nimport { bindEvents } from './events.js';\nimport { dispatchEvent, warnIfMissingBootstrap } from './utils.js';\n\nexport class FxdSelect {\n  constructor(selectEl, options = {}) {\n    if (!selectEl || selectEl.tagName !== 'SELECT') {\n      throw new Error('FxdSelect requires a <select> element');\n    }\n\n    this.selectEl = selectEl;\n    this.options = { ...FxdSelect.defaults, ...options };\n    this.state = {\n      open: false,\n      query: '',\n      focusedIndex: -1,\n    };\n\n    this.model = buildModel(this.selectEl, this.options);\n    this.ui = render(this.selectEl, this.model, this.options);\n    this.cleanup = bindEvents(this);\n\n    this.selectEl.classList.add('d-none');\n\n    if (this.options.warnOnMissingBootstrap) {\n      warnIfMissingBootstrap(this.options.bootstrapMajor);\n    }\n\n    dispatchEvent(this.selectEl, 'fxd:init');\n  }\n\n  _syncOpenState(open) {\n    this.state.open = open;\n    if (open) {\n      this.ui.wrapper.classList.add('show');\n      this.ui.menu.classList.add('show');\n      this.ui.button.setAttribute('aria-expanded', 'true');\n    } else {\n      this.ui.wrapper.classList.remove('show');\n      this.ui.menu.classList.remove('show');\n      this.ui.button.setAttribute('aria-expanded', 'false');\n      this.ui.button.removeAttribute('aria-activedescendant');\n      this.state.focusedIndex = -1;\n    }\n  }\n\n  open() {\n    if (this.state.open) return;\n    this._syncOpenState(true);\n    dispatchEvent(this.selectEl, 'fxd:open');\n  }\n\n  close() {\n    if (!this.state.open) return;\n    this._syncOpenState(false);\n    dispatchEvent(this.selectEl, 'fxd:close');\n  }\n\n  toggle() {\n    if (this.state.open) this.close();\n    else this.open();\n  }\n\n  refresh() {\n    const wasOpen = this.state.open;\n    this.cleanup?.();\n    this.model = buildModel(this.selectEl, this.options);\n    this.ui = render(this.selectEl, this.model, this.options, this.ui);\n    this.cleanup = bindEvents(this);\n    this._syncOpenState(wasOpen);\n    if (this.ui.searchInput && this.state.query) {\n      this.ui.searchInput.value = this.state.query;\n      this.ui.searchInput.dispatchEvent(new Event('input'));\n    }\n    dispatchEvent(this.selectEl, 'fxd:refresh');\n  }\n\n  destroy() {\n    this.cleanup?.();\n    this.ui.wrapper.remove();\n    this.selectEl.classList.remove('d-none');\n    dispatchEvent(this.selectEl, 'fxd:destroy');\n  }\n\n  getValue() {\n    return this.selectEl.value;\n  }\n\n  setValue(value) {\n    this.selectEl.value = value;\n    this.selectEl.dispatchEvent(new Event('change', { bubbles: true }));\n  }\n\n  clear() {\n    if (this.selectEl.multiple) {\n      Array.from(this.selectEl.options).forEach((opt) => {\n        opt.selected = false;\n      });\n    } else {\n      this.selectEl.value = '';\n    }\n    this.selectEl.dispatchEvent(new Event('change', { bubbles: true }));\n  }\n}\n\nFxdSelect.defaults = {\n  searchable: true,\n  clearable: false,\n  maxHeight: '12em',\n  placeholder: 'Select...',\n  noResultsText: 'No entries found',\n  buttonClass: 'form-select text-start',\n  wrapperClass: '',\n  menuClass: 'dropdown-menu p-0',\n  filterPlaceholder: 'Search',\n  showDivider: true,\n  renderOption: null,\n  renderValue: null,\n  data: null,\n  load: null,\n  loadDebounce: 250,\n  maxDisplayItems: 3,\n  multiValueStyle: 'pills',\n  selectionCountClass: 'badge bg-secondary',\n  selectionCountTemplate: (count) => `${count} selected`,\n  pillClass: 'badge text-bg-light border',\n  pillContainerClass: 'fxd-pills',\n  clearButtonClass: 'btn btn-outline-secondary btn-sm',\n  clearButtonLabel: 'Clear selection',\n  clearButtonText: '×',\n  searchClearable: true,\n  searchClearButtonClass: 'btn btn-link btn-sm text-decoration-none',\n  searchClearIcon: '×',\n  searchClearAriaLabel: 'Clear search',\n  warnOnMissingBootstrap: true,\n  bootstrapMajor: 5,\n  showCheckmark: true,\n  checkmarkText: '✓',\n  checkmarkClass: 'fxd-checkmark',\n  filter: null,\n};\n","import { FxdSelect } from './core/FxdSelect.js';\n\nconst instanceMap = new WeakMap();\n\nfunction toCamel(str) {\n  return str.replace(/-([a-z])/g, (_, c) => c.toUpperCase());\n}\n\nfunction parseValue(value) {\n  if (value === 'true') return true;\n  if (value === 'false') return false;\n  if (value === 'null') return null;\n  if (value === 'undefined') return undefined;\n  if (value !== '' && !Number.isNaN(Number(value))) return Number(value);\n  if ((value.startsWith('{') && value.endsWith('}')) || (value.startsWith('[') && value.endsWith(']'))) {\n    try {\n      return JSON.parse(value);\n    } catch {\n      return value;\n    }\n  }\n  return value;\n}\n\nfunction optionsFromDataset(dataset) {\n  const options = {};\n  Object.entries(dataset).forEach(([key, value]) => {\n    if (!key.startsWith('fxdsel')) return;\n    const raw = key.replace(/^fxdsel/, '');\n    const prop = toCamel(raw.charAt(0).toLowerCase() + raw.slice(1));\n    options[prop] = parseValue(value);\n  });\n  return options;\n}\n\nexport function initFxdSelects(root = document) {\n  const nodes = root.querySelectorAll('select[data-fxd-select], select.fxd-init-select');\n  nodes.forEach((selectEl) => {\n    if (instanceMap.has(selectEl)) return;\n    const options = optionsFromDataset(selectEl.dataset);\n    const instance = new FxdSelect(selectEl, options);\n    instanceMap.set(selectEl, instance);\n  });\n}\n\nif (typeof document !== 'undefined') {\n  document.addEventListener('DOMContentLoaded', () => {\n    initFxdSelects();\n  });\n}\n\nexport { FxdSelect };\n"],"names":["normalizeOptions","data","selectEl","Array","isArray","selectedValues","multiple","Set","from","selectedOptions","map","opt","value","item","label","String","selected","has","disabled","Boolean","group","element","buildModel","options","querySelectorAll","forEach","push","textContent","parentElement","tagName","parseSelect","idCounter","createId","prefix","dispatchEvent","el","name","detail","CustomEvent","bubbles","render","model","existingUi","ui","classString","menu","innerHTML","wrapper","document","createElement","className","wrapperClass","split","c","classList","add","control","button","type","buttonClass","setAttribute","appendChild","clearable","clearButton","clearButtonClass","clearButtonLabel","clearButtonText","menuClass","parentNode","insertBefore","nextSibling","list","id","searchable","searchWrapper","searchContainer","searchInput","placeholder","filterPlaceholder","searchClearable","searchClear","searchClearButtonClass","searchClearAriaLabel","searchClearIcon","searchClearButton","removeChild","showDivider","divider","noResults","noResultsText","maxHeight","style","overflowY","optionButtons","currentGroup","header","dataset","renderOption","rendered","HTMLElement","showCheckmark","check","checkmarkClass","checkmarkText","renderValue","filter","length","multiValueStyle","container","pillContainerClass","visibleLimit","Math","max","maxDisplayItems","visibleLabels","slice","min","pill","pillClass","remaining","count","selectionCountClass","tpl","selectionCountTemplate","text","join","updateButtonLabel","isDisabled","defaultFilter","query","option","toLowerCase","includes","bindEvents","fxd","state","getVisibleOptions","contains","setFocusedIndex","index","optionsList","focusedIndex","removeAttribute","clamped","remove","focused","scrollIntoView","block","focusSelectedOrFirst","selectedIndex","findIndex","getAttribute","onButtonClick","e","preventDefault","toggle","open","select","onDocumentClick","target","close","onItemClick","closest","find","Event","focus","onItemHover","idx","indexOf","onSelectChange","refresh","loadTimer","runLoad","async","load","currentGroups","Map","parent","groupEl","set","get","optionEl","syncSelectWithModel","onFilterInput","clearTimeout","setTimeout","loadDebounce","filterFn","result","listEl","groupState","hidden","visible","children","matches","show","groupKey","applyFilter","onKeyDown","key","click","delta","onClearClick","clear","onSearchClearClick","addEventListener","removeEventListener","FxdSelect","constructor","Error","this","defaults","cleanup","warnOnMissingBootstrap","major","window","bsBodyColor","getComputedStyle","documentElement","getPropertyValue","trim","probeMenu","position","visibility","body","menuStyles","console","warn","warnIfMissingBootstrap","bootstrapMajor","_syncOpenState","wasOpen","destroy","getValue","setValue","instanceMap","WeakMap","optionsFromDataset","Object","entries","startsWith","raw","replace","prop","charAt","_","toUpperCase","Number","isNaN","endsWith","JSON","parse","parseValue","initFxdSelects","root","instance"],"mappings":"AAiBO,SAASA,EAAiBC,EAAMC,GACrC,IAAKC,MAAMC,QAAQH,GAAO,MAAO,GAEjC,MAAMI,EAAiBH,GAAUI,SAC7B,IAAIC,IAAIJ,MAAMK,KAAKN,EAASO,iBAAiBC,IAAKC,GAAQA,EAAIC,QAC9D,IAAIL,IAAI,CAACL,GAAUU,QAEvB,OAAOX,EAAKS,IAAKG,IACf,MAAMD,EAAQC,EAAKD,OAAS,GAM5B,MAAO,CACLA,QACAE,MAPYD,EAAKC,OAASC,OAAOH,GAQjCI,SAPwC,kBAAlBH,EAAKG,SACzBH,EAAKG,SACLX,EAAeY,IAAIL,GAMrBM,SAAUC,QAAQN,EAAKK,UACvBE,MAAOP,EAAKO,OAAS,KACrBC,QAAS,OAGf,CAEO,SAASC,EAAWpB,EAAUqB,EAAU,IAC7C,OAAIpB,MAAMC,QAAQmB,EAAQtB,MACjBD,EAAiBuB,EAAQtB,KAAMC,GA5CnC,SAAqBA,GAC1B,MAAMqB,EAAU,GAahB,OAXArB,EAASsB,iBAAiB,UAAUC,QAASd,IAC3CY,EAAQG,KAAK,CACXd,MAAOD,EAAIC,MACXE,MAAOH,EAAIgB,YACXX,SAAUL,EAAIK,SACdE,SAAUP,EAAIO,SACdE,MAAsC,aAA/BT,EAAIiB,eAAeC,QAAyBlB,EAAIiB,cAAcd,MAAQ,KAC7EO,QAASV,MAINY,CACT,CA+BSO,CAAY5B,EACrB,CC/CA,IAAI6B,EAAY,EAET,SAASC,EAASC,GAEvB,OADAF,GAAa,EACN,GAAGE,KAAUF,GACtB,CASO,SAASG,EAAcC,EAAIC,EAAMC,EAAS,CAAA,GAC/CF,EAAGD,cAAc,IAAII,YAAYF,EAAM,CAAEC,SAAQE,SAAS,IAC5D,CCuDO,SAASC,EAAOtC,EAAUuC,EAAOlB,EAASmB,EAAa,MAC5D,MAAMC,EAAKD,GAAc,CAAA,EDjEpB,IAAoBP,EAAIS,EC8G7B,GA3CKF,EAkCHC,EAAGE,KAAKC,UAAY,IAjCpBH,EAAGI,QAAUC,SAASC,cAAc,OACpCN,EAAGI,QAAQG,UAAY,sBDrEAf,ECsEZQ,EAAGI,SDtEaH,ECsEJrB,EAAQ4B,eDpEjCP,EAAYQ,MAAM,KAAK3B,QAAS4B,IAC1BA,GAAGlB,EAAGmB,UAAUC,IAAIF,KCqExBV,EAAGa,QAAUR,SAASC,cAAc,OACpCN,EAAGa,QAAQN,UAAY,kCAEvBP,EAAGc,OAAST,SAASC,cAAc,UACnCN,EAAGc,OAAOC,KAAO,SACjBf,EAAGc,OAAOP,UAAY3B,EAAQoC,YAC9BhB,EAAGc,OAAOG,aAAa,OAAQ,YAC/BjB,EAAGc,OAAOG,aAAa,gBAAiB,WACxCjB,EAAGc,OAAOG,aAAa,gBAAiB,SAExCjB,EAAGa,QAAQK,YAAYlB,EAAGc,QAEtBlC,EAAQuC,YACVnB,EAAGoB,YAAcf,SAASC,cAAc,UACxCN,EAAGoB,YAAYL,KAAO,SACtBf,EAAGoB,YAAYb,UAAY3B,EAAQyC,iBACnCrB,EAAGoB,YAAYH,aAAa,aAAcrC,EAAQ0C,kBAClDtB,EAAGoB,YAAYpC,YAAcJ,EAAQ2C,gBACrCvB,EAAGa,QAAQK,YAAYlB,EAAGoB,cAG5BpB,EAAGE,KAAOG,SAASC,cAAc,OACjCN,EAAGE,KAAKK,UAAY3B,EAAQ4C,UAE5BxB,EAAGI,QAAQc,YAAYlB,EAAGa,SAC1Bb,EAAGI,QAAQc,YAAYlB,EAAGE,MAE1B3C,EAASkE,WAAWC,aAAa1B,EAAGI,QAAS7C,EAASoE,cAKxD3B,EAAG4B,KAAOvB,SAASC,cAAc,OACjCN,EAAG4B,KAAKC,GAAK7B,EAAG4B,KAAKC,IAAMxC,EAAS,YACpCW,EAAG4B,KAAKX,aAAa,OAAQ,WAE7BjB,EAAGc,OAAOG,aAAa,gBAAiBjB,EAAG4B,KAAKC,IAE5CjD,EAAQkD,WAAY,CACtB,MAAMC,EAAgB1B,SAASC,cAAc,OACvC0B,EAAkB3B,SAASC,cAAc,OACzC2B,EAAc5B,SAASC,cAAc,SAS3C,GAPA0B,EAAgBzB,UAAY,kFAC5B0B,EAAY1B,UAAY,kDACxB0B,EAAYC,YAActD,EAAQuD,kBAClCF,EAAYhB,aAAa,aAAcrC,EAAQuD,mBAE/CH,EAAgBd,YAAYe,GAExBrD,EAAQwD,gBAAiB,CAC3B,MAAMC,EAAchC,SAASC,cAAc,UAC3C+B,EAAYtB,KAAO,SACnBsB,EAAY9B,UAAY,oBAAoB3B,EAAQ0D,yBACpDD,EAAYpB,aAAa,aAAcrC,EAAQ2D,sBAC/CF,EAAYrD,YAAcJ,EAAQ4D,gBAClCR,EAAgBd,YAAYmB,GAC5BrC,EAAGyC,kBAAoBJ,CACzB,CAYA,GAVIrC,EAAGoB,aAAe7D,EAASI,WAC7BqC,EAAGa,QAAQ6B,YAAY1C,EAAGoB,aAC1BY,EAAgBd,YAAYlB,EAAGoB,cAGjCW,EAAcb,YAAYc,GAC1BhC,EAAGE,KAAKgB,YAAYa,GAEpB/B,EAAGiC,YAAcA,EAEbrD,EAAQ+D,YAAa,CACvB,MAAMC,EAAUvC,SAASC,cAAc,MACvCsC,EAAQrC,UAAY,MACpBP,EAAGE,KAAKgB,YAAY0B,EACtB,CAEA5C,EAAG6C,UAAYxC,SAASC,cAAc,OACtCN,EAAG6C,UAAUtC,UAAY,yCACzBP,EAAG6C,UAAU7D,YAAcJ,EAAQkE,cACnC9C,EAAGE,KAAKgB,YAAYlB,EAAG6C,UACzB,CAEIjE,EAAQmE,WAAmC,SAAtBnE,EAAQmE,YAC/B/C,EAAG4B,KAAKoB,MAAMC,UAAY,OAC1BjD,EAAG4B,KAAKoB,MAAMD,UAAYnE,EAAQmE,WAGpC/C,EAAGE,KAAKgB,YAAYlB,EAAG4B,MAEvB5B,EAAGkD,cAAgB,GAEnB,IAAIC,EAAe,KACnBrD,EAAMhB,QAASd,IACb,GAAIA,EAAIS,OAAST,EAAIS,QAAU0E,EAAc,CAC3C,MAAMC,EAAS/C,SAASC,cAAc,OACtC8C,EAAO7C,UAAY,kBACnB6C,EAAOpE,YAAchB,EAAIS,MACzB2E,EAAOC,QAAQ5E,MAAQT,EAAIS,MAC3BuB,EAAG4B,KAAKV,YAAYkC,GACpBD,EAAenF,EAAIS,KACrB,CAEKT,EAAIS,QACP0E,EAAe,MAGjB,MAAMjF,EAAOmC,SAASC,cAAc,UAWpC,GAVApC,EAAK6C,KAAO,SACZ7C,EAAKqC,UAAY,yBACjBrC,EAAKc,YAAchB,EAAIG,MACvBD,EAAKmF,QAAQpF,MAAQD,EAAIC,MACzBC,EAAKmF,QAAQ5E,MAAQT,EAAIS,OAAS,GAClCP,EAAKK,SAAWP,EAAIO,SACpBL,EAAK+C,aAAa,OAAQ,UAC1B/C,EAAK+C,aAAa,gBAAiBjD,EAAIK,SAAW,OAAS,SAC3DH,EAAK2D,GAAKxC,EAAS,WAEfT,EAAQ0E,aAAc,CACxB,MAAMC,EAAW3E,EAAQ0E,aAAatF,EAAK,CAAEK,SAAUL,EAAIK,SAAUE,SAAUP,EAAIO,WAC/EgF,aAAoBC,aACtBtF,EAAKiC,UAAY,GACjBjC,EAAKgD,YAAYqC,IACY,iBAAbA,IAChBrF,EAAKiC,UAAYoD,EAErB,CAMA,GAJIvF,EAAIK,UACNH,EAAKyC,UAAUC,IAAI,eAGjBhC,EAAQ6E,cAAe,CACzB,MAAMC,EAAQrD,SAASC,cAAc,QACrCoD,EAAMnD,UAAY3B,EAAQ+E,eAC1BD,EAAMzC,aAAa,cAAe,QAClCyC,EAAM1E,YAAcJ,EAAQgF,cAC5B1F,EAAKgD,YAAYwC,EACnB,CAEA1D,EAAGkD,cAAcnE,KAAKb,GACtB8B,EAAG4B,KAAKV,YAAYhD,KAzNxB,SAA2B8B,EAAIF,EAAOlB,EAASrB,GAC7C,GAAmC,mBAAxBqB,EAAQiF,YAA4B,CAC7C,MAAMN,EAAW3E,EAAQiF,YAAY/D,EAAOvC,GAC5C,OAAIgG,aAAoBC,aACtBxD,EAAGc,OAAOX,UAAY,QACtBH,EAAGc,OAAOI,YAAYqC,SAGxBvD,EAAGc,OAAOX,UAAYoD,GAAY,GAEpC,CAEA,MAAMlF,EAAWyB,EAAMgE,OAAQ9F,GAAQA,EAAIK,UAC3C,GAAwB,IAApBA,EAAS0F,OAAb,CAKA,GAAIxG,EAASI,SAAU,CACrB,GAAgC,UAA5BiB,EAAQoF,gBAA6B,CACvC,MAAMC,EAAY5D,SAASC,cAAc,QACzC2D,EAAU1D,UAAY3B,EAAQsF,mBAE9B,MACMC,EADMC,KAAKC,IAAI,EAAGzF,EAAQ0F,iBACL,EACrBC,EAAgBlG,EAASmG,MAAM,EAAGJ,KAAKK,IAAIpG,EAAS0F,OAAQI,IAClEI,EAAczF,QAASd,IACrB,MAAM0G,EAAOrE,SAASC,cAAc,QACpCoE,EAAKnE,UAAY3B,EAAQ+F,UACzBD,EAAK1F,YAAchB,EAAIG,MACvB8F,EAAU/C,YAAYwD,KAGxB,MAAME,EAAYvG,EAAS0F,OAASQ,EAAcR,OAClD,GAAIa,EAAY,EAAG,CACjB,MAAMC,EAAQxE,SAASC,cAAc,QACrCuE,EAAMtE,UAAY3B,EAAQkG,oBAC1B,MAAMC,EAAMnG,EAAQoG,uBACpBH,EAAM7F,YAA6B,mBAAR+F,EAAqBA,EAAIH,GAAa,GAAGA,aACpEX,EAAU/C,YAAY2D,EACxB,CAIA,OAFA7E,EAAGc,OAAOX,UAAY,QACtBH,EAAGc,OAAOI,YAAY+C,EAExB,CAEA,GAAgC,UAA5BrF,EAAQoF,gBAA6B,CACvC,MAAMe,EAAMnG,EAAQoG,uBACdC,EAAsB,mBAARF,EAAqBA,EAAI1G,EAAS0F,QAAU,GAAG1F,EAAS0F,kBAE5E,YADA/D,EAAGc,OAAOX,UAAY,gBAAgBvB,EAAQkG,wBAAwBG,WAExE,CAEA,MACMd,EADMC,KAAKC,IAAI,EAAGzF,EAAQ0F,iBACL,EAC3B,GAAIjG,EAAS0F,OAASI,EAAc,CAClC,MAAMS,EAAYvG,EAAS0F,OAASI,EAC9BY,EAAMnG,EAAQoG,uBAEpB,YADAhF,EAAGc,OAAO9B,YAA6B,mBAAR+F,EAAqBA,EAAIH,GAAa,GAAGA,aAE1E,CAEA,YADA5E,EAAGc,OAAO9B,YAAcX,EAASN,IAAKC,GAAQA,EAAIG,OAAO+G,KAAK,MAEhE,CAEAlF,EAAGc,OAAO9B,YAAcX,EAAS,GAAGF,KAlDpC,MAFE6B,EAAGc,OAAO9B,YAAcJ,EAAQsD,WAqDpC,CAyJEiD,CAAkBnF,EAAIF,EAAOlB,EAASrB,GAEtC,MAAM6H,EAAa7H,EAASgB,SAM5B,OALAyB,EAAGc,OAAOvC,SAAW6G,EACjBpF,EAAGoB,cAAapB,EAAGoB,YAAY7C,SAAW6G,GAC1CpF,EAAGiC,cAAajC,EAAGiC,YAAY1D,SAAW6G,GAC1CpF,EAAGyC,oBAAmBzC,EAAGyC,kBAAkBlE,SAAW6G,GAEnDpF,CACT,CCvOO,SAASqF,EAAcC,EAAOC,GACnC,OAAKD,GACEC,EAAOpH,MAAMqH,cAAcC,SAASH,EAAME,cACnD,CCCO,SAASE,EAAWC,GACzB,MAAMpI,SAAEA,EAAQyC,GAAEA,EAAEpB,QAAEA,EAAOgH,MAAEA,GAAUD,EAEnCE,EAAoB,IACxBrI,MAAMK,KAAKmC,EAAG4B,KAAK/C,iBAAiB,yBAAyBiF,OAC1D5F,IAAUA,EAAKyC,UAAUmF,SAAS,YAAc5H,EAAKK,UAIpDwH,EAAmBC,IACvB,MAAMC,EAAcJ,IACpB,GAA2B,IAAvBI,EAAYlC,OAGd,OAFA6B,EAAMM,cAAe,OACrBlG,EAAGc,OAAOqF,gBAAgB,yBAI5B,MAAMC,EAAUhC,KAAKC,IAAI,EAAGD,KAAKK,IAAIuB,EAAOC,EAAYlC,OAAS,IACjEkC,EAAYnH,QAASZ,GAASA,EAAKyC,UAAU0F,OAAO,WAEpD,MAAMC,EAAUL,EAAYG,GAC5BE,EAAQ3F,UAAUC,IAAI,UACtB0F,EAAQC,eAAe,CAAEC,MAAO,YAEhCZ,EAAMM,aAAeE,EACrBpG,EAAGc,OAAOG,aAAa,wBAAyBqF,EAAQzE,KAGpD4E,EAAuB,KAC3B,MAAMR,EAAcJ,IACpB,GAA2B,IAAvBI,EAAYlC,OAAc,OAE9B,MAAM2C,EAAgBT,EAAYU,UAC/BzI,GAAgD,SAAvCA,EAAK0I,aAAa,kBAG9Bb,EAAgBW,GAAiB,EAAIA,EAAgB,IAGjDG,EAAiBC,IACjBvJ,EAASgB,WACbuI,EAAEC,iBACFpB,EAAIqB,SACArB,EAAIC,MAAMqB,OACZR,IACAzG,EAAGiC,aAAaiF,YAIdC,EAAmBL,IAClB9G,EAAGI,QAAQ0F,SAASgB,EAAEM,SACzBzB,EAAI0B,SAIFC,EAAeR,IACnB,MAAM5I,EAAO4I,EAAEM,OAAOG,QAAQ,wBAC9B,GAAKrJ,IACDX,EAASgB,WAAYL,EAAKK,SAC9B,GAAIhB,EAASI,SAAU,CACrB,MAAM4H,EAAS/H,MAAMK,KAAKN,EAASqB,SAAS4I,KAAMxJ,GAAQA,EAAIC,QAAUC,EAAKmF,QAAQpF,OACjFsH,IACFA,EAAOlH,UAAYkH,EAAOlH,UAE5Bd,EAASgC,cAAc,IAAIkI,MAAM,SAAU,CAAE7H,SAAS,IACxD,MACErC,EAASU,MAAQC,EAAKmF,QAAQpF,MAC9BV,EAASgC,cAAc,IAAIkI,MAAM,SAAU,CAAE7H,SAAS,KACtD+F,EAAI0B,QACJrH,EAAGc,OAAO4G,SAIRC,EAAeb,IACnB,MAAM5I,EAAO4I,EAAEM,OAAOG,QAAQ,wBAC9B,IAAKrJ,EAAM,OAEX,MACM0J,EADc/B,IACIgC,QAAQ3J,GAC5B0J,GAAO,GAAG7B,EAAgB6B,IAG1BE,EAAiB,KACrBnC,EAAIoC,UACJxI,EAAchC,EAAU,eAG1B,IAAIyK,EAAY,KAChB,MAAMC,EAAUC,MAAO5C,IACrB,MAAMhI,QAAasB,EAAQuJ,OAAO7C,IAClC,IAAK9H,MAAMC,QAAQH,GAAO,OAC1B,MAAMwC,EAAQzC,EAAiBC,EAAMC,IJ9ClC,SAA6BA,EAAUuC,GAC5C,MAAMsI,EAAgB,IAAIC,IAC1B9K,EAAS4C,UAAY,GAErBL,EAAMhB,QAASd,IACb,IAAIsK,EAAS/K,EACb,GAAIS,EAAIS,MAAO,CACb,IAAK2J,EAAc9J,IAAIN,EAAIS,OAAQ,CACjC,MAAM8J,EAAUlI,SAASC,cAAc,YACvCiI,EAAQpK,MAAQH,EAAIS,MACpB2J,EAAcI,IAAIxK,EAAIS,MAAO8J,GAC7BhL,EAAS2D,YAAYqH,EACvB,CACAD,EAASF,EAAcK,IAAIzK,EAAIS,MACjC,CAEA,MAAMiK,EAAWrI,SAASC,cAAc,UACxCoI,EAASzK,MAAQD,EAAIC,MACrByK,EAAS1J,YAAchB,EAAIG,MAC3BuK,EAASnK,SAAWC,QAAQR,EAAIO,UAChCmK,EAASrK,SAAWG,QAAQR,EAAIK,UAChCiK,EAAOpH,YAAYwH,IAEvB,CIwBIC,CAAoBpL,EAAUuC,GAC9B6F,EAAI7F,MAAQA,EACZ6F,EAAIoC,UACApC,EAAI3F,GAAGiC,cACT0D,EAAI3F,GAAGiC,YAAYhE,MAAQqH,IAIzBsD,EAAiB9B,IACrB,MAAMxB,EAAQwB,EAAEM,OAAOnJ,MAGvB,GAFA0H,EAAIC,MAAMN,MAAQA,EAEd1G,EAAQuJ,KAGV,OAFIH,GAAWa,aAAab,QAC5BA,EAAYc,WAAW,IAAMb,EAAQ3C,GAAQ1G,EAAQmK,eAIvD,MAAMC,EAAWpK,EAAQkF,QAAUuB,EAC7B4D,ED9GH,SAAqBC,EAAQ5D,EAAO0D,GACzC,MAAMG,EAAa,IAAId,IACvB,IAAIe,EAAS,EACTC,EAAU,EA0Bd,OAxBA7L,MAAMK,KAAKqL,EAAOI,UAAUxK,QAASZ,IACnC,GAAIA,EAAKyC,UAAUmF,SAAS,mBAE1B,YADAqD,EAAWX,IAAItK,EAAKmF,QAAQ5E,OAAS,GAAI,CAAE2E,OAAQlF,EAAMmL,QAAS,IAIpE,IAAKnL,EAAKqL,QAAQ,wBAAyB,OAE3C,MAAMhE,EAAS,CAAEpH,MAAOD,EAAKc,aACvBwK,EAAOR,EAAS1D,EAAOC,GAC7BrH,EAAKyC,UAAUqG,OAAO,UAAWwC,GAC5BA,IAAMJ,GAAU,GACjBI,IAAMH,GAAW,GAErB,MAAMI,EAAWvL,EAAKmF,QAAQ5E,OAAS,GACnC0K,EAAW7K,IAAImL,IAAaD,IAC9BL,EAAWV,IAAIgB,GAAUJ,SAAW,KAIxCF,EAAWrK,QAAQ,EAAGsE,SAAQiG,cAC5BjG,EAAOzC,UAAUqG,OAAO,SAAsB,IAAZqC,KAG7B,CAAED,SAAQC,UACnB,CCgFmBK,CAAY1J,EAAG4B,KAAM0D,EAAO0D,GAEvChJ,EAAG6C,WACL7C,EAAG6C,UAAUlC,UAAUqG,OAAO,SAAUiC,EAAOI,QAAU,GAG3D5C,KAGIkD,EAAa7C,IACjB,GAAIvJ,EAASgB,SAAU,OACvB,MAAMqL,EAAM9C,EAAE8C,IAId,IAAKjE,EAAIC,MAAMqB,MAHE,CAAC,YAAa,UAAW,QAAS,KAGnBxB,SAASmE,GAKvC,OAJA9C,EAAEC,iBACFpB,EAAIsB,OACJR,SACAzG,EAAGiC,aAAaiF,SAIlB,GAAKvB,EAAIC,MAAMqB,KAAf,CAEA,GAAY,WAAR2C,EAIF,OAHA9C,EAAEC,iBACFpB,EAAI0B,aACJrH,EAAGc,OAAO4G,QAIZ,GAAY,UAARkC,EAAiB,CACnB9C,EAAEC,iBACF,MACMT,EADcT,IACQD,EAAMM,cAIlC,YAHII,GACFA,EAAQuD,QAGZ,CAEA,GAAY,MAARD,EAAa,CACf9C,EAAEC,iBACF,MACMT,EADcT,IACQD,EAAMM,cAIlC,YAHII,GACFA,EAAQuD,QAGZ,CAEA,GAvCgB,CAAC,YAAa,UAAW,OAAQ,OAuCrCpE,SAASmE,GAAM,CACzB9C,EAAEC,iBACF,MAAMd,EAAcJ,IACpB,GAA2B,IAAvBI,EAAYlC,OAAc,OAE9B,GAAY,SAAR6F,EAEF,YADA7D,EAAgB,GAIlB,GAAY,QAAR6D,EAEF,YADA7D,EAAgBE,EAAYlC,OAAS,GAIvC,MAAM+F,EAAgB,cAARF,EAAsB,GAAI,EACxC7D,EAAgBH,EAAMM,aAAe4D,EACvC,CA9CqB,GAiDjBC,EAAgBjD,IACpBA,EAAEC,iBACFpB,EAAIqE,SAGAC,EAAqB,KACpBjK,EAAGiC,cACRjC,EAAGiC,YAAYhE,MAAQ,GACvB+B,EAAGiC,YAAY1C,cAAc,IAAIkI,MAAM,UACvCzH,EAAGiC,YAAYiF,WAajB,OAVAlH,EAAGc,OAAOoJ,iBAAiB,QAASrD,GACpC7G,EAAG4B,KAAKsI,iBAAiB,QAAS5C,GAClCtH,EAAG4B,KAAKsI,iBAAiB,YAAavC,GACtCtH,SAAS6J,iBAAiB,QAAS/C,GACnC5J,EAAS2M,iBAAiB,SAAUpC,GACpC9H,EAAGiC,aAAaiI,iBAAiB,QAAStB,GAC1C5I,EAAGyC,mBAAmByH,iBAAiB,QAASD,GAChDjK,EAAGI,QAAQ8J,iBAAiB,UAAWP,GACvC3J,EAAGoB,aAAa8I,iBAAiB,QAASH,GAEnC,KACL/J,EAAGc,OAAOqJ,oBAAoB,QAAStD,GACvC7G,EAAG4B,KAAKuI,oBAAoB,QAAS7C,GACrCtH,EAAG4B,KAAKuI,oBAAoB,YAAaxC,GACzCtH,SAAS8J,oBAAoB,QAAShD,GACtC5J,EAAS4M,oBAAoB,SAAUrC,GACvC9H,EAAGiC,aAAakI,oBAAoB,QAASvB,GAC7C5I,EAAGyC,mBAAmB0H,oBAAoB,QAASF,GACnDjK,EAAGI,QAAQ+J,oBAAoB,UAAWR,GAC1C3J,EAAGoB,aAAa+I,oBAAoB,QAASJ,GAEjD,CCvNO,MAAMK,EACX,WAAAC,CAAY9M,EAAUqB,EAAU,IAC9B,IAAKrB,GAAiC,WAArBA,EAAS2B,QACxB,MAAM,IAAIoL,MAAM,yCAGlBC,KAAKhN,SAAWA,EAChBgN,KAAK3L,QAAU,IAAKwL,EAAUI,YAAa5L,GAC3C2L,KAAK3E,MAAQ,CACXqB,MAAM,EACN3B,MAAO,GACPY,cAAc,GAGhBqE,KAAKzK,MAAQnB,EAAW4L,KAAKhN,SAAUgN,KAAK3L,SAC5C2L,KAAKvK,GAAKH,EAAO0K,KAAKhN,SAAUgN,KAAKzK,MAAOyK,KAAK3L,SACjD2L,KAAKE,QAAU/E,EAAW6E,MAE1BA,KAAKhN,SAASoD,UAAUC,IAAI,UAExB2J,KAAK3L,QAAQ8L,wBJPd,SAAgCC,EAAQ,GAC7C,GAAsB,oBAAXC,QAA8C,oBAAbvK,SAA0B,OAEtE,MACMwK,EADaC,iBAAiBzK,SAAS0K,iBACdC,iBAAiB,mBAAmBC,OAE7DC,EAAY7K,SAASC,cAAc,OACzC4K,EAAU3K,UAAY,gBACtB2K,EAAUlI,MAAMmI,SAAW,WAC3BD,EAAUlI,MAAMoI,WAAa,SAC7B/K,SAASgL,KAAKnK,YAAYgK,GAC1B,MAAMI,EAAaR,iBAAiBI,GACpC7K,SAASgL,KAAK3I,YAAYwI,GAELL,EAAY9G,OAAS,GAA6B,aAAxBuH,EAAWH,UAGxDI,QAAQC,KACN,yBAAyBb,kGAI/B,CIdMc,CAAuBlB,KAAK3L,QAAQ8M,gBAGtCnM,EAAcgL,KAAKhN,SAAU,WAC/B,CAEA,cAAAoO,CAAe1E,GACbsD,KAAK3E,MAAMqB,KAAOA,EACdA,GACFsD,KAAKvK,GAAGI,QAAQO,UAAUC,IAAI,QAC9B2J,KAAKvK,GAAGE,KAAKS,UAAUC,IAAI,QAC3B2J,KAAKvK,GAAGc,OAAOG,aAAa,gBAAiB,UAE7CsJ,KAAKvK,GAAGI,QAAQO,UAAU0F,OAAO,QACjCkE,KAAKvK,GAAGE,KAAKS,UAAU0F,OAAO,QAC9BkE,KAAKvK,GAAGc,OAAOG,aAAa,gBAAiB,SAC7CsJ,KAAKvK,GAAGc,OAAOqF,gBAAgB,yBAC/BoE,KAAK3E,MAAMM,cAAe,EAE9B,CAEA,IAAAe,GACMsD,KAAK3E,MAAMqB,OACfsD,KAAKoB,gBAAe,GACpBpM,EAAcgL,KAAKhN,SAAU,YAC/B,CAEA,KAAA8J,GACOkD,KAAK3E,MAAMqB,OAChBsD,KAAKoB,gBAAe,GACpBpM,EAAcgL,KAAKhN,SAAU,aAC/B,CAEA,MAAAyJ,GACMuD,KAAK3E,MAAMqB,KAAMsD,KAAKlD,QACrBkD,KAAKtD,MACZ,CAEA,OAAAc,GACE,MAAM6D,EAAUrB,KAAK3E,MAAMqB,KAC3BsD,KAAKE,YACLF,KAAKzK,MAAQnB,EAAW4L,KAAKhN,SAAUgN,KAAK3L,SAC5C2L,KAAKvK,GAAKH,EAAO0K,KAAKhN,SAAUgN,KAAKzK,MAAOyK,KAAK3L,QAAS2L,KAAKvK,IAC/DuK,KAAKE,QAAU/E,EAAW6E,MAC1BA,KAAKoB,eAAeC,GAChBrB,KAAKvK,GAAGiC,aAAesI,KAAK3E,MAAMN,QACpCiF,KAAKvK,GAAGiC,YAAYhE,MAAQsM,KAAK3E,MAAMN,MACvCiF,KAAKvK,GAAGiC,YAAY1C,cAAc,IAAIkI,MAAM,WAE9ClI,EAAcgL,KAAKhN,SAAU,cAC/B,CAEA,OAAAsO,GACEtB,KAAKE,YACLF,KAAKvK,GAAGI,QAAQiG,SAChBkE,KAAKhN,SAASoD,UAAU0F,OAAO,UAC/B9G,EAAcgL,KAAKhN,SAAU,cAC/B,CAEA,QAAAuO,GACE,OAAOvB,KAAKhN,SAASU,KACvB,CAEA,QAAA8N,CAAS9N,GACPsM,KAAKhN,SAASU,MAAQA,EACtBsM,KAAKhN,SAASgC,cAAc,IAAIkI,MAAM,SAAU,CAAE7H,SAAS,IAC7D,CAEA,KAAAoK,GACMO,KAAKhN,SAASI,SAChBH,MAAMK,KAAK0M,KAAKhN,SAASqB,SAASE,QAASd,IACzCA,EAAIK,UAAW,IAGjBkM,KAAKhN,SAASU,MAAQ,GAExBsM,KAAKhN,SAASgC,cAAc,IAAIkI,MAAM,SAAU,CAAE7H,SAAS,IAC7D,EAGFwK,EAAUI,SAAW,CACnB1I,YAAY,EACZX,WAAW,EACX4B,UAAW,OACXb,YAAa,YACbY,cAAe,mBACf9B,YAAa,yBACbR,aAAc,GACdgB,UAAW,oBACXW,kBAAmB,SACnBQ,aAAa,EACbW,aAAc,KACdO,YAAa,KACbvG,KAAM,KACN6K,KAAM,KACNY,aAAc,IACdzE,gBAAiB,EACjBN,gBAAiB,QACjBc,oBAAqB,qBACrBE,uBAAyBH,GAAU,GAAGA,aACtCF,UAAW,6BACXT,mBAAoB,YACpB7C,iBAAkB,mCAClBC,iBAAkB,kBAClBC,gBAAiB,IACjBa,iBAAiB,EACjBE,uBAAwB,2CACxBE,gBAAiB,IACjBD,qBAAsB,eACtBmI,wBAAwB,EACxBgB,eAAgB,EAChBjI,eAAe,EACfG,cAAe,IACfD,eAAgB,gBAChBG,OAAQ,MC1IV,MAAMkI,EAAc,IAAIC,QAsBxB,SAASC,EAAmB7I,GAC1B,MAAMzE,EAAU,CAAA,EAOhB,OANAuN,OAAOC,QAAQ/I,GAASvE,QAAQ,EAAE8K,EAAK3L,MACrC,IAAK2L,EAAIyC,WAAW,UAAW,OAC/B,MAAMC,EAAM1C,EAAI2C,QAAQ,UAAW,IAC7BC,GAAeF,EAAIG,OAAO,GAAGjH,cAAgB8G,EAAI9H,MAAM,IAxBpD+H,QAAQ,YAAa,CAACG,EAAGhM,IAAMA,EAAEiM,eAyB1C/N,EAAQ4N,GAtBZ,SAAoBvO,GAClB,GAAc,SAAVA,EAAkB,OAAO,EAC7B,GAAc,UAAVA,EAAmB,OAAO,EAC9B,GAAc,SAAVA,EAAkB,OAAO,KAC7B,GAAc,cAAVA,EAAJ,CACA,GAAc,KAAVA,IAAiB2O,OAAOC,MAAMD,OAAO3O,IAAS,OAAO2O,OAAO3O,GAChE,GAAKA,EAAMoO,WAAW,MAAQpO,EAAM6O,SAAS,MAAU7O,EAAMoO,WAAW,MAAQpO,EAAM6O,SAAS,KAC7F,IACE,OAAOC,KAAKC,MAAM/O,EACpB,CAAE,MACA,OAAOA,CACT,CAEF,OAAOA,CAToC,CAU7C,CAQoBgP,CAAWhP,KAEtBW,CACT,CAEO,SAASsO,EAAeC,EAAO9M,UACtB8M,EAAKtO,iBAAiB,mDAC9BC,QAASvB,IACb,GAAIyO,EAAY1N,IAAIf,GAAW,OAC/B,MAAMqB,EAAUsN,EAAmB3O,EAAS8F,SACtC+J,EAAW,IAAIhD,EAAU7M,EAAUqB,GACzCoN,EAAYxD,IAAIjL,EAAU6P,IAE9B,CAEwB,oBAAb/M,UACTA,SAAS6J,iBAAiB,mBAAoB,KAC5CgD"}